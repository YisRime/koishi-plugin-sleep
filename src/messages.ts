/**
 * æ¶ˆæ¯æ¨¡æ¿
 * åŒ…å«å„ç§åœºæ™¯çš„éšæœºæç¤ºæ¶ˆæ¯
 */
export const templates = {
  /**
   * ç¦è¨€ç›¸å…³æ¶ˆæ¯
   */
  mute: {
    // ç¦è¨€æˆåŠŸçš„æ¶ˆæ¯
    success: [
      '{target}å·²è¢«ç¦è¨€{minutes}åˆ†é’Ÿ{seconds}ç§’',
      'å·²å°†{target}ç¦è¨€{minutes}åˆ†é’Ÿ{seconds}ç§’',
      '{target}è¢«ç¦å£°{minutes}åˆ†é’Ÿ{seconds}ç§’ï¼Œå®‰é™æ˜¯ä¸€ç§ç¾å¾·',
      '{target}å°†ä¼šå®‰é™{minutes}åˆ†é’Ÿ{seconds}ç§’',
      'å˜˜ï¼{target}å·²è¿›å…¥{minutes}åˆ†é’Ÿ{seconds}ç§’çš„æ²‰é»˜æ¨¡å¼'
    ],

    // è‡ªæˆ‘ç¦è¨€çš„æ¶ˆæ¯
    self: [
      'å·²å°†ä½ ç¦è¨€{minutes}åˆ†é’Ÿ{seconds}ç§’',
      'ä½ é€‰æ‹©äº†æ²‰é»˜ï¼Œç¦è¨€æ—¶é—´ä¸º{minutes}åˆ†é’Ÿ{seconds}ç§’',
      'ä½ å°†å®‰é™{minutes}åˆ†é’Ÿ{seconds}ç§’',
      'ä½ å·²è¢«ç¦è¨€{minutes}åˆ†é’Ÿ{seconds}ç§’ï¼Œå¥½å¥½åçœå§',
      'ç¦è¨€{minutes}åˆ†é’Ÿ{seconds}ç§’ï¼Œäº«å—ç‰‡åˆ»å®é™'
    ],

    // ç¦è¨€å¤±è´¥/åå¼¹çš„æ¶ˆæ¯
    backfire: [
      'å“å‘€ï¼{user}çš„ç¦è¨€é­”æ³•åå¼¹äº†ï¼',
      'é­”æ³•å¤±æ§ï¼{user}è‡ªé£Ÿå…¶æœï¼',
      'ç¦è¨€åå™¬ï¼{user}å°åˆ°äº†è‡ªå·±çš„é­”æ³•ï¼',
      'åå¼¹ï¼{user}æˆäº†ç¦è¨€çš„å—å®³è€…ï¼',
      'æœºä¼šå¥³ç¥çœ·é¡¾äº†{target}ï¼Œ{user}è‡ªå·±è¢«ç¦è¨€äº†ï¼'
    ]
  },

  /**
   * ç‰¹æ®Šæ•ˆæœç›¸å…³æ¶ˆæ¯
   */
  effects: {
    // æš´å‡»æ•ˆæœçš„æ¶ˆæ¯
    critical: [
      'æš´å‡»ï¼ç¦è¨€æ—¶é—´ç¿»å€ï¼',
      'è‡´å‘½ä¸€å‡»ï¼{target}é­å—åŒå€ç¦è¨€ï¼',
      'å‘½ä¸­è¦å®³ï¼ç¦è¨€æ—¶é—´åŠ å€ï¼',
      'Critical Hit! åŒå€ç¦è¨€æ—¶é—´ï¼',
      'ç¦è¨€æš´å‡»ï¼{target}è¿æ°”ä¸ä½³...'
    ],

    // éšæœºç›®æ ‡é€‰æ‹©çš„æ¶ˆæ¯
    randomTarget: [
      'å‘½è¿ä¹‹è½®è½¬åŠ¨ï¼Œ{target}æˆä¸ºäº†è¢«é€‰ä¸­çš„å¹¸è¿å„¿ï¼',
      'ç¦è¨€é­”æ³•éšæœºå‘åŠ¨ï¼Œ{target}ä¸­æ‹›äº†ï¼',
      'ç¦è¨€ä¹‹ç®­å°„å‘äº†éšæœºç›®æ ‡ï¼Œ{target}ä¸­ç®­äº†ï¼',
      'æ„Ÿè°¢{target}è‡ªæ„¿æˆä¸ºä»Šå¤©çš„æ²‰é»˜ä»£è¡¨',
      'æ­å–œ{target}è·å¾—ç‰¹åˆ«ç¦è¨€ä½“éªŒ'
    ],

    // æˆåŠŸæ–½æ”¾ç¦è¨€
    success: [
      '{user}æˆåŠŸæ–½æ”¾äº†ç¦è¨€æœ¯ï¼',
      '{user}çš„ç¦è¨€å’’è¯­ç”Ÿæ•ˆäº†ï¼',
      '{user}çš„é­”æ³•ç¦è¨€ç”Ÿæ•ˆäº†ï¼',
      '{user}ä½¿ç”¨äº†ç¦è¨€å·è½´ï¼Œæ•ˆæœæ‹”ç¾¤ï¼',
      'åœ¨{user}çš„æŒ‡æŒ¥ä¸‹ï¼Œç¦è¨€æˆåŠŸç”Ÿæ•ˆ'
    ],

    // è‡ªæˆ‘æƒ©ç½šæ¶ˆæ¯
    selfPunish: [
      'è‡ªé£Ÿå…¶æœï¼',
      'è¿™æ˜¯ä¸€æ¬¡å‹‡æ•¢çš„è‡ªæˆ‘çº¦æŸ',
      'è‡ªæˆ‘ç¦è¨€ï¼Œä¿®è¡Œå¼€å§‹ï¼',
      'è¿™æ˜¯è‡ªå¾‹çš„è¡¨ç°ï¼Œå€¼å¾—é¼“åŠ±',
      'è‡ªæˆ‘ç¦è¨€ï¼Œé™å¿ƒæ€è¿‡'
    ]
  },

  /**
   * ç¦è¨€è½®ç›˜ç›¸å…³æ¶ˆæ¯
   */
  roulette: {
    // è½®ç›˜ç»“æœçš„æ¶ˆæ¯
    result: [
      "ç °ï¼å‘½è¿çš„å­å¼¹å·²ç»å‘å°„ï¼",
      "è½®ç›˜è½¬åŠ¨ï¼Œå‘½è¿å·²å®šï¼",
      "ç¦è¨€ä¹‹è½®å·²ç»æ—‹è½¬å®Œæ¯•ï¼",
      "å‘½è¿å¥³ç¥å·²ç»åšå‡ºé€‰æ‹©ï¼",
      "ç¦è¨€å¼¹æ— æƒ…åœ°å°„å‡ºï¼"
    ],

    // è½®ç›˜ç¦è¨€æ¶ˆæ¯
    mute: [
      "ğŸ¯ {target} ä¸­å¼¹äº†ï¼è¢«ç¦è¨€{minutes}åˆ†é’Ÿ{seconds}ç§’",
      "ç °ï¼{target} æˆä¸ºäº†ç¦è¨€è½®ç›˜çš„ç‰ºç‰²å“ï¼Œç¦è¨€{minutes}åˆ†é’Ÿ{seconds}ç§’",
      "{target} è¿æ°”ä¸ä½³ï¼Œè·å¾—{minutes}åˆ†é’Ÿ{seconds}ç§’çš„æ²‰é»˜æ—¶é—´",
      "å‘½è¿é€‰ä¸­äº†{target}ï¼Œç¦è¨€{minutes}åˆ†é’Ÿ{seconds}ç§’",
      "è½®ç›˜ä¹‹ç¥å¸¦èµ°äº†{target}çš„å‘è¨€æƒï¼ŒæŒç»­{minutes}åˆ†é’Ÿ{seconds}ç§’"
    ],

    // è½®ç›˜å¹¸å­˜æ¶ˆæ¯
    survived: [
      "å¥½é™©ï¼å­å¼¹æ“¦è‚©è€Œè¿‡ï¼",
      "å‘½è¿çœ·é¡¾äº†ä½ ï¼Œé€ƒè¿‡ä¸€åŠ«ï¼",
      "ä»Šå¤©è¿æ°”ä¸é”™ï¼Œé€ƒè¿‡ç¦è¨€ï¼",
      "æ­å–œä½ æ´»ä¸‹æ¥äº†ï¼",
      "ç¦è¨€ä¹‹ç¥æ”¾è¿‡äº†ä½ ï¼"
    ]
  },

  /**
   * ç¥ç§˜å£çƒé­”æ³•ç›¸å…³æ¶ˆæ¯
   */
  magicMute: {
    // è§¦å‘å£çƒé­”æ³•æ—¶çš„æ¶ˆæ¯
    triggered: [
      "ğŸ² æ­å–œ{target}ï¼è§¦å‘äº†ç¥ç§˜å£çƒé­”æ³•ï¼æœ¬æ¬¡æ¦‚ç‡: {probability}%ï¼Œç¦è¨€{minutes}åˆ†é’Ÿ{seconds}ç§’",
      "âœ¨ {target}ä¸­å¥–å•¦ï¼å£çƒé­”æ³•å‘åŠ¨ï¼Œå½“å‰æ¦‚ç‡: {probability}%ï¼Œç¦è¨€{minutes}åˆ†é’Ÿ{seconds}ç§’",
      "ğŸ¯ å£çƒé­”æ³•é€‰ä¸­äº†{target}ï¼(æ¦‚ç‡: {probability}%)ï¼Œç¦è¨€{minutes}åˆ†é’Ÿ{seconds}ç§’",
      "ğŸ”® æ·±å¤œå£çƒé­”æ³•é™ä¸´ï¼Œ{target}æˆä¸ºå¹¸è¿å„¿ï¼æ¦‚ç‡: {probability}%ï¼Œç¦è¨€{minutes}åˆ†é’Ÿ{seconds}ç§’",
      "ğŸ‘» å¤œé—´å£çƒé­”æ³•å‘åŠ¨ï¼Œ{target}ä¸­å¥–ï¼å½“å‰æ¦‚ç‡: {probability}%ï¼Œç¦è¨€{minutes}åˆ†é’Ÿ{seconds}ç§’"
    ]
  }
}

/**
 * è·å–éšæœºæ¶ˆæ¯å¹¶æ›¿æ¢å˜é‡
 * @param category æ¶ˆæ¯ç±»åˆ«
 * @param subCategory å­ç±»åˆ«
 * @param variables è¦æ›¿æ¢çš„å˜é‡
 * @returns æ ¼å¼åŒ–åçš„æ¶ˆæ¯
 */
export function getRandomMessage(
  category: keyof typeof templates,
  subCategory: string,
  variables: Record<string, string> = {}
): string {
  if (!templates[category] || !templates[category][subCategory]) {
    return 'æ¶ˆæ¯æ¨¡æ¿æœªæ‰¾åˆ°';
  }

  const messageArray = templates[category][subCategory];
  const message = messageArray[Math.floor(Math.random() * messageArray.length)];

  // æ›¿æ¢å˜é‡
  return message.replace(/\{(\w+)\}/g, (_, key) =>
    variables[key] !== undefined ? variables[key] : `{${key}}`
  );
}
